<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css"/>
    <link rel="stylesheet" href="reset.css"/>
</head>
<body>
    <div class="frame">

    </div>
    <script>
        const frame = document.querySelector('.frame')
        const imgs = [1,2,3,4,5]
        let imgCount = 0
        for (let i = 0; i<5; i++){
            appendCard()
        }
        
        let cur = frame.querySelector('.card:last-child') //최상단
        let startX = 0, startY = 0, moveX = 0, moveY = 0
        addEventListener(cur)


        function appendCard() {
            const firstCard = frame.children[0]
            const newCard = document.createElement('div')
            newCard.className = 'card'
            newCard.style.backgroundColor = `pink`
            if (firstCard) frame.insertBefore(newCard, firstCard) //첫번째 카드가 있으면 앞에 새카드
            else frame.appendChild(newCard) // 없으면 
        }
        
        function addEventListener(card) {
            card.addEventListener('pointerdown', onPointerDown)
        }

        function setTransform(x, y, deg){
            cur.style.transform = `translate3d(${x}px, ${y}px, 0) rotate(${deg}deg)`

        }        
        
        function onPointerDown(e) {
            startX = e.clientX
            startY = e.clientY
            cur.addEventListener('pointermove', onPointerMove) // pointerdown 있을때만 나머지 이벤트 추가
            cur.addEventListener('pointerup', onPointerUp)
            cur.addEventListener('pointerleave', onPointerLeave)
        }

        function onPointerMove(e) {
            moveX = e.clientX - startX
            moveY = e.clientY - startY

            setTransform(moveX, moveY, moveX / innerWidth * 50)
        }
    </script>
</body>
</html>